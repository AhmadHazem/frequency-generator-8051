C51 COMPILER V9.60.7.0   QUAD_7SEGMENT                                                     04/19/2023 18:10:34 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE QUAD_7SEGMENT
OBJECT MODULE PLACED IN .\Objects\quad_7segment.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE quad_7segment.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\List
                    -ings\quad_7segment.lst) TABS(2) OBJECT(.\Objects\quad_7segment.obj)

line level    source

   1          #include "timer0.h"
   2          #include "quad_7segment.h"
   3          
   4          sbit control1 = P0^3;            // Defining LED pin
   5          sbit control2 = P0^2;            // Defining LED pin
   6          sbit control3 = P0^1;            // Defining LED pin
   7          sbit control4 = P0^0;            // Defining LED pin
   8          #define DIGIT_0 0xC0
   9          #define DIGIT_1 0xF9
  10          #define DIGIT_2 0xA4
  11          #define DIGIT_3 0xB0
  12          #define DIGIT_4 0x99
  13          #define DIGIT_5 0x92
  14          #define DIGIT_6 0x82
  15          #define DIGIT_7 0xF8
  16          #define DIGIT_8 0x80
  17          #define DIGIT_9 0x90
  18          #define BLANK 0xFF
  19          
  20          
  21          
  22          void init_7segment(){
  23   1        init_timer0();
  24   1        control1=0; //turn off control
  25   1        control2=0; //turn off control
  26   1        control3=0; //turn off control
  27   1        control4=0; //turn off control
  28   1        P2=DIGIT_4; //clear PORT
  29   1      }
  30          
  31          
  32          unsigned char numToPattern(unsigned char digit){
  33   1        unsigned char pattern=0;
  34   1        switch (digit) {
  35   2          case 0:
  36   2                  pattern=DIGIT_0;
  37   2                  break;
  38   2          case 1:
  39   2                  pattern=DIGIT_1;
  40   2                  break;
  41   2          case 2:
  42   2                  pattern=DIGIT_2;
  43   2                  break;
  44   2          case 3:
  45   2                  pattern=DIGIT_3;
  46   2              break;
  47   2          case 4:
  48   2                  pattern=DIGIT_4;
  49   2              break;
  50   2          case 5:
  51   2                  pattern=DIGIT_5;
  52   2              break;
  53   2          case 6:
  54   2                  pattern=DIGIT_6;
C51 COMPILER V9.60.7.0   QUAD_7SEGMENT                                                     04/19/2023 18:10:34 PAGE 2   

  55   2              break;
  56   2          case 7:
  57   2                  pattern=DIGIT_7;
  58   2              break;
  59   2          case 8:
  60   2                  pattern=DIGIT_8;
  61   2              break;
  62   2          case 9:
  63   2                  pattern=DIGIT_9;
  64   2              break;
  65   2          default:
  66   2              // Display a blank segment
  67   2                  pattern=BLANK;
  68   2              break;
  69   2      }
  70   1        return pattern;
  71   1      }
  72          
  73          
  74          
  75          void show_7segment(unsigned int num)
  76            {
  77   1        
  78   1        unsigned char digit1=num%10;
  79   1        unsigned char digit2=(num/10)%10;
  80   1        unsigned char digit3=(num/100)%10;
  81   1        unsigned char digit4=(num/1000)%10;
  82   1        unsigned char pattern1=numToPattern(digit1);
  83   1        unsigned char pattern2=numToPattern(digit2);
  84   1        unsigned char pattern3=numToPattern(digit3);
  85   1        unsigned char pattern4=numToPattern(digit4);
  86   1        int flag=get_global_variable();
  87   1        if(flag==0){
  88   2            control1 = 1;           
  89   2            control2 = 0;           
  90   2            control3 = 0;            
  91   2            control4 = 0;
  92   2            P2= pattern1;
  93   2        }else if (flag==1){
  94   2            control1 = 0;           
  95   2            control2 = 1;           
  96   2            control3 = 0;            
  97   2            control4 = 0;
  98   2            P2= pattern2;
  99   2        }
 100   1        else if (flag==2){
 101   2              control1 = 0;           
 102   2              control2 = 0;           
 103   2              control3 = 1;            
 104   2              control4 = 0;
 105   2              P2= pattern3; }
 106   1        else if (flag==3){
 107   2              control1 = 0;           
 108   2              control2 = 0;           
 109   2              control3 = 0;            
 110   2              control4 = 1;
 111   2              P2= pattern4;
 112   2        }
 113   1        else if (flag==4){
 114   2              control1 = 0;           
 115   2              control2 = 0;           
 116   2              control3 = 0;            
C51 COMPILER V9.60.7.0   QUAD_7SEGMENT                                                     04/19/2023 18:10:34 PAGE 3   

 117   2              control4 = 0;
 118   2              P2= pattern4;
 119   2        }
 120   1        
 121   1      }
 122          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    293    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       7
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
